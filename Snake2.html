<!DOCTYPE html>
<html>
<head>
    <title>Two-Player Snake Game</title>
    <style>
        #gameCanvas {
            background-color: #333;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <script>
        // Game constants
        const canvas = document.getElementById('gameCanvas');
        const context = canvas.getContext('2d');
        const blockSize = 20;
        const canvasSize = 20;
        const player1 = {
            x: 0,
            y: 0,
            direction: 'right',
            trail: [],
            tailLength: 5
        };
        const player2 = {
            x: canvasSize - 1,
            y: canvasSize - 1,
            direction: 'left',
            trail: [],
            tailLength: 5
        };

        // Game loop
        function gameLoop() {
            update();
            draw();
        }

        function update() {
            updatePlayer(player1);
            updatePlayer(player2);

            // Check collision between players
            if (checkCollision(player1, player2)) {
                gameOver();
            }
        }

        function updatePlayer(player) {
            player.trail.push({ x: player.x, y: player.y });
            while (player.trail.length > player.tailLength) {
                player.trail.shift();
            }

            switch (player.direction) {
                case 'up':
                    player.y--;
                    break;
                case 'down':
                    player.y++;
                    break;
                case 'left':
                    player.x--;
                    break;
                case 'right':
                    player.x++;
                    break;
            }

            // Check collision with walls
            if (player.x < 0 || player.x >= canvasSize || player.y < 0 || player.y >= canvasSize) {
                gameOver();
            }

            // Check collision with own trail
            if (checkCollisionWithTrail(player)) {
                gameOver();
            }
        }

        function draw() {
            // Clear the canvas
            context.fillStyle = '#333';
            context.fillRect(0, 0, canvas.width, canvas.height);

            drawPlayer(player1, '#f00'); // Player 1 is red
            drawPlayer(player2, '#0f0'); // Player 2 is green
        }

        function drawPlayer(player, color) {
            context.fillStyle = color;

            for (let i = 0; i < player.trail.length; i++) {
                const block = player.trail[i];
                context.fillRect(block.x * blockSize, block.y * blockSize, blockSize, blockSize);
            }

            context.fillRect(player.x * blockSize, player.y * blockSize, blockSize, blockSize);
        }

        function checkCollision(player1, player2) {
            return player1.x === player2.x && player1.y === player2.y;
        }

        function checkCollisionWithTrail(player) {
            for (let i = 0; i < player.trail.length - 1; i++) {
                if (player.x === player.trail[i].x && player.y === player.trail[i].y) {
                    return true;
                }
            }
            return false;
        }

        function gameOver() {
            clearInterval(gameInterval);
            alert('Game Over');
        }

        // Keyboard input handling
        document.addEventListener('keydown', function (event) {
            const key = event.key;
            const player1Keys = ['w', 'a', 's', 'd'];
            const player2Keys = ['ArrowUp', 'ArrowLeft', 'ArrowDown', 'ArrowRight'];

            if (player1Keys.includes(key)) {
                updatePlayerDirection(player1, key);
            } else if (player2Keys.includes(key)) {
                updatePlayerDirection(player2, key);
            }
        });

        function updatePlayerDirection(player, key) {
            switch (key) {
                case 'w':
                case 'ArrowUp':
                    if (player.direction !== 'down') {
                        player.direction = 'up';
                    }
                    break;
                case 'a':
                case 'ArrowLeft':
                    if (player.direction !== 'right') {
                        player.direction = 'left';
                    }
                    break;
                case 's':
                case 'ArrowDown':
                    if (player.direction !== 'up') {
                        player.direction = 'down';
                    }
                    break;
                case 'd':
                case 'ArrowRight':
                    if (player.direction !== 'left') {
                        player.direction = 'right';
                    }
                    break;
            }
        }

        // Start the game
        const gameInterval = setInterval(gameLoop, 100);
    </script>
</body>
</html>
